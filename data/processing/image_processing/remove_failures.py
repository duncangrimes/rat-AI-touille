import json

def remove_failed_recipes(input_json_file, failed_ids):
    with open(input_json_file, 'r') as f:
        recipes = json.load(f)

    # Filter out recipes with failed IDs
    filtered_recipes = [recipe for recipe in recipes if recipe['id'] not in failed_ids]

    # Save filtered recipes to a new JSON file
    output_json_file = 'filtered_recipes_without_failures.json'
    with open(output_json_file, 'w') as f:
        json.dump(filtered_recipes, f, indent=2)

    print(f"{len(recipes) - len(filtered_recipes)} recipes removed.")
    print(f"Filtered recipes saved to {output_json_file}.")

# Example usage:
input_json_file = 'filtered_recipes.json'  # Replace with the path to your JSON file
failed_ids = [360, 416, 440, 770, 847, 850, 851, 852, 853, 854, 855, 856, 857, 858, 935, 1164, 1206, 1209, 1212, 1213, 1221, 1248, 1258, 1276, 1277, 1278, 1279, 1280, 1281, 1282, 1302, 1345, 1351, 1395, 1443, 1455, 1619, 2794, 2795, 2797, 2798, 2865, 2866, 2867, 2868, 2871, 2872, 2873, 2884, 2893, 2894, 2895, 2896, 2897, 2900, 2901, 2907, 2909, 2911, 2912, 2916, 2918, 2919, 2920, 2921, 2922, 2923, 2924, 2925, 2928, 2929, 2931, 2932, 2933, 2934, 2935, 2936, 2937, 2938, 2939, 2940, 2941, 2942, 2943, 2944, 2945, 2946, 2947, 2950, 2951, 2952, 2953, 2954, 2955, 2956, 2957, 2958, 2959, 2962, 2963, 2964, 2965, 2966, 2967, 3017, 3034, 3037, 3039, 3040, 3041, 3043, 3044, 3046, 3049, 3052, 3053, 3055, 3132, 3133, 3134, 3139, 3140, 3159, 3162, 3171, 3172, 3173, 3174, 3176, 3177, 3178, 3195, 3199, 3200, 3201, 3202, 3204, 3206, 3207, 3208, 3209, 3210, 3213, 3214, 3215, 3216, 3217, 3218, 3220, 3221, 3222, 3223, 3224, 3225, 3226, 3227, 3228, 3229, 3235, 3236, 3237, 3238, 3239, 3240, 3241, 3242, 3243, 3244, 3245, 3246, 3247, 3248, 3249, 3250, 3252, 3253, 3254, 3255, 3256, 3257, 3258, 3259, 3260, 3261, 3262, 3263, 3264, 3265, 3266, 3280, 3312, 3573, 3709, 3754, 3762, 3766, 3768, 3769, 3770, 3771, 3772, 3773, 3774, 3775, 3776, 3777, 3778, 3781, 3782, 3879, 3883, 3885, 3886, 3893, 3895, 3896, 3897, 4036, 4037, 4049, 4050, 4051, 4052, 4053, 4054, 4055, 4058, 4059, 4061, 4062, 4064, 4065, 4066, 4072, 4073, 4077, 4080, 4081, 4082, 4084, 4085, 4086, 4087, 4089, 4090, 4091, 4136, 4153, 4155, 4156, 4159, 4160, 4181, 4200, 4203, 4204, 4205, 4208, 4209, 4211]  # Include the complete list of failed IDs
remove_failed_recipes(input_json_file, failed_ids)
